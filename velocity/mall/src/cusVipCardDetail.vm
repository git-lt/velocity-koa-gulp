<!DOCTYPE html>
<html lang="zh-cn">
<head>
<link rel="shortcut icon" href="https://qncdn.qiakr.com/favicon.ico">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" >
<meta name="viewport" content="initial-scale=1, width=device-width, maximum-scale=1, user-scalable=no">
<link rel="dns-prefetch" href="//static.qiakr.com/">
<meta name="apple-mobile-web-app-capable" content="yes" >
<meta name='apple-touch-fullscreen' content='yes'>
<meta name="full-screen" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black" >
<meta name="format-detection" content="telephone=no">
<meta name="format-detection" content="address=no">
<script type="text/javascript">
  (function(f,e){var g=f.documentElement,c="orientationchange" in window?"orientationchange":"resize",d=function(){var j=g.clientWidth||320;var h=g.classList;var i=j<320?320:j>750?750:j;g.style.fontSize=(i/10)+"px";g.style.opacity=1;if(j<375){h.add("view-sm");h.remove("view-md")}else{h.remove("view-sm");h.add("view-md")}};g.style.opacity=0;e.addEventListener(c,d,false);f.addEventListener("DOMContentLoaded",d,false);if(/iP(hone|od|ad)/.test(navigator.userAgent)){var b=(navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/),a=parseInt(b[1],10);if(a>=8){document.documentElement.classList.add("hairlines")}}})(document,window);
</script>
<link href="/css/user/style.css?v=4.0.0" rel="stylesheet" type="text/css">
<script src="//res.qiakr.com/plugins/mall/qk.mall.min.js"></script>

<!-- 内嵌的css -->
<style media="screen" build>
  body {background: #fff;}
  .d1 {height: 100px;}
</style>
<style media="screen" build>
  html,body { min-width: 320px;/*no*/ max-width: 750px;/*no*/  margin:0 auto; min-height: 100%;}
  body {padding-bottom:45px; background-color: #fff;
  background: url(//qncdn.qiakr.com/wx/ajax-loader.gif) no-repeat center center;
  }
  * {box-sizing: border-box;}

  main {padding-bottom: 100px;}
  .h-view,.v-view { display: flex;}
  .h-view { flex-direction: row; }
  .v-view { flex-direction: column; }

  .cus-level-base {text-align: center; padding: 45px; height: 700px; background: #2F2A27 url(//qncdn.qiakr.com/wx/gradeBg@2x.png) no-repeat center center; background-size: cover; }
  .cus-avatar {position: relative; width: 92px; height: 92px; border:2px solid #fff;/*no*/ background-color:#fff; border-radius: 50%; display: inline-block; background-size: cover; background-repeat: no-repeat;}
  .cus-curr-level {
    position: relative;;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background-color: #fff;
    top: 65px;
    left: 50%;
    margin-left: -18px;
    margin-bottom: -18px;
  }
  .cus-curr-level:after{
    content: ''; display: block; width: 100%; height: 100%;
    position: absolute; left: 0; top: 0;
    background-size:cover;
  }

  .cus-curr-level.level1:after {
    background-image: inline('grade_icon_numPtOn.png');
  }

  .cus-curr-level.level2:after {
    background-image: inline('grade_icon_numHjOn.png');
  }

  .cus-curr-level.level3:after {
    background-image: inline('grade_icon_numBjOn.png');
  }

  .cus-curr-level.level4:after {
    background-image: inline('grade_icon_numZsOn.png');
  }

  .curr-customer-name { margin-top:15px;}


  .cus-name {color:#fff; font-size: 30px; line-height: 1.5;}

  .cus-level-list {margin-top: 40px;}

  .cus-level-list .level-img { width: 53px; height: 53px; display: inline-block; margin-bottom: 10px; background: none; position: relative; overflow: hidden;
  background-repeat: no-repeat;
  background-size: cover;
  background-position: center center;
  }
  .cus-level-list .level-img:after{
    content: ''; display: block; width: 10000%; height: 10000%;
    position: absolute; left: 0; top: 0;
    background-image: url(//qncdn.qiakr.com/wx/4479_a532_sprite.png?v=c36678b6); background-repeat: no-repeat;
    background-size: 5200px 44400px!important;
    -webkit-transform-origin: 0 0; -webkit-transform: scale(.01); transform-origin: 0 0; transform: scale(.01);
  }

  .cus-level-list .level-img.active.level1:after {background-position: -0px -0px; }
  .cus-level-list .level-img.active.level2:after {background-position: -0px -5600px; }
  .cus-level-list .level-img.active.level3:after {background-position: -0px -11200px; }
  .cus-level-list .level-img.active.level4:after {background-position: -0px -16800px; }

  .cus-level-list .level-img.level1:after {background-position: -0px -22400px; }
  .cus-level-list .level-img.level2:after {background-position: -0px -28000px;}
  .cus-level-list .level-img.level3:after {background-position: -0px -33600px; }
  .cus-level-list .level-img.level4:after {background-position: -0px -39200px; }

  .cus-level-list .level-name {font-size: 24px; color:#8C837C;}
  .cus-level-main { margin-top: 90px; margin-bottom: 35px; color:#fff; font-size: 30px;font-weight: 500; }
  .cus-level-mainimg {color:#DBA959; font-size: 82px; margin-bottom: 10px; height: 82px; line-height: 1;}
  .cus-level-mainval {color:#fff; font-size: 35px;}

  .cus-level-other { text-align: center; }
  .cus-level-otit {font-size: 30px; margin-top: 65px; margin-bottom: 50px;}

  .cus-level-other .level-name {font-size: 24px;}
  .cus-level-other .level-img {font-size: 82px; line-height: 1; height: 82px; color:#C4C4C4; margin:20px 0;}
  .cus-level-other .level-value {font-size: 26px; font-family: arial;}

  .dvd-line {width: 690px; height: 1px; font-size: 0;line-height: 0; background:#EFEFF4; margin:60px auto;}

  .empty-tip-box{
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    margin: auto;
    width: 80%;
    height: 1em;
    text-align: center;
    font-size: 16px;
    color:#888;
  }
</style>

<title>等级特权</title>
</head>
<body ontouchstart="" id="mainWrap">
  <script type="text/html" id="vip-card-tpl">
    <main>
      <section class="cus-level-base">
        <div class="">
          <div class="cus-avatar" style="background-image:url({{avatar}})">
            <div class="cus-curr-level  level{{myVipLevel.level}}"></div>
          </div>
          <div class="cus-name curr-customer-name">{{name}}</div>
        </div>
        <ul class="cus-level-list ui-flex justify-around">
          {{each allLevel as item i}}
          <li>
            <div class="level-img level{{item.level}} {{if myVipLevel.level === item.level}}active{{/if}}"></div>
            <div class="level-name">{{item.name}}</div>
          </li>
          {{/each}}
        </ul>

        <h2 class="cus-level-main">我的会员等级特权</h2>
        <i class="iconfont cus-level-mainimg">&#xe66d;</i>
        <div class="cus-level-mainval">{{myVipLevel.discount}}折</div>
      </section>

      <section class="cus-level-other">
        <h2 class="cus-level-otit">其他会员等级特权</h2>
        <ul class="ui-flex justify-around">
          {{each allLevel as level j}}
            {{if level.level !== myVipLevel.level}}
            <li>
              <div class="level-name">{{level.name}}</div>
              <i class="iconfont level-img">&#xe66d;</i>
              <div class="level-value">{{level.discount}}折</div>
            </li>
            {{/if}}
          {{/each}}
        </ul>
      </section>
      <div class="dvd-line"></div>
    </main>
  </script>

  <!-- 内嵌的js -->
  <script type="text/javascript" build>
    /* globals Zepto,template */
    var Q = Zepto;
    var pageView = {
      init:function(){ this.getData(); },
      getData:function(){
        var wrap = Q('#mainWrap');
        // 显示loading
        Q.post('customerLevelIndex.json')
          .done(function(data){
            if(data.status==='0'){
              wrap.html(template('vip-card-tpl',data.result));
            }else{
              wrap.html('<div class="empty-tip-box">'+(data.errmsg || '服务器繁忙')+'</div>');
            }
          })
          .fail(function(){
            wrap.html('<div class="empty-tip-box">未登录或服务器繁忙</div>');
          })
          .always(function(){
            wrap.css('background-image','none');
          });
      }
    }
    pageView.init();
  </script>

</body>
</html>
